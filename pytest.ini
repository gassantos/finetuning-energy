# Configuração do pytest
# ======================

[pytest]
minversion = 8.0

# Opções padrão
addopts = 
    -ra
    --strict-markers
    --strict-config
    --tb=short
    --disable-warnings
    --color=yes
    --durations=10

# Diretórios de teste
testpaths = tests

# Padrões de arquivos de teste
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Markers customizados
markers =
    slow: marca testes como lentos (desmarque com '-m "not slow"')
    integration: marca testes de integração
    unit: marca testes unitários
    gpu: marca testes que requerem GPU
    network: marca testes que requerem acesso à rede
    performance: marca testes de performance/benchmark
    mock: marca testes que usam principalmente mocks
    real: marca testes que usam recursos reais (GPU, rede, etc)
    config: marca testes relacionados a configuração
    auth: marca testes relacionados a autenticação
    model: marca testes relacionados a modelos
    dataset: marca testes relacionados a datasets
    training: marca testes relacionados a treinamento
    monitoring: marca testes relacionados a monitoramento

# Filtros de warnings
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::FutureWarning
    ignore::PendingDeprecationWarning
    ignore:.*Using pad_token.*:UserWarning
    ignore:.*resume_download.*:FutureWarning
    ignore:.*torch.distributed.*:UserWarning
    ignore:.*transformers.*:UserWarning

# Timeout global (em segundos)
timeout = 300

# Configuração de logging durante os testes
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Arquivo de log
log_file = tests/output/tests.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(filename)s:%(lineno)d %(funcName)s(): %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Configuração de cache
cache_dir = .pytest_cache
